evaluationDependsOn ":client"
evaluationDependsOn ":server"

// Assumes our test database is named "test"
task clearMongoDB(type: Exec) {
     group = 'Database'
     description = 'Drops the local MongoDB test database'
     executable "mongo"
     args = ["ddg", "--eval", "printjson(db.dropDatabase())"]
}

task seedToDoData(type: Exec) {
     group = 'Database'
     description = 'Seeds the todos collection on local test DB using todos.seed.json'
     executable = "mongoimport"
     args = ["-d", "ddg", "-c", "todos", "--file", "todos.seed.json", "--jsonArray"]
}

task seedUserData(type: Exec) {
     group = 'Database'
     description = 'Seeds the users collection on local test DB using users.seed.json'
     executable = "mongoimport"
     args = ["-d", "ddg", "-c", "users", "--file", "users.seed.json", "--jsonArray"]
}

task seedFlowerData(type: Exec) {
     group = 'Database'
     description = 'Seeds the flower collection on local test DB using flowers.seed.json'
     executable = "mongoimport"
     args = ["-d", "ddg", "-c", "flowers", "--file", "flowers.seed.json", "--jsonArray"]
}

task seedMongoDB { }
seedMongoDB.dependsOn(clearMongoDB)
seedMongoDB.dependsOn(seedToDoData)
seedMongoDB.dependsOn(seedUserData)
seedMongoDB.dependsOn(seedFlowerData)
